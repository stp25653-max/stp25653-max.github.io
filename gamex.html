<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ - ‡∏Å‡∏§‡∏©‡∏ì‡∏≤ ‡∏î‡∏≠‡∏°‡πÑ‡∏ò‡∏™‡∏á</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: auto;
        }
        
        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .player-name {
            font-size: 24px;
            font-weight: 600;
            color: #5a67d8;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .stat {
            text-align: center;
            padding: 8px 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            font-weight: 500;
            min-width: 80px;
        }
        
        .restaurant-layout {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .panel h3 {
            color: #5a67d8;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
            font-size: 18px;
        }
        
        .restaurant-floor {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 500px;
            position: relative;
        }
        
        .tables-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .table {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 3px solid transparent;
        }
        
        .table:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .table.occupied {
            border-color: #e74c3c;
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
        }
        
        .table.served {
            border-color: #27ae60;
            background: linear-gradient(135deg, #d4fc79, #96e6a1);
        }
        
        .table.paid {
            border-color: #f39c12;
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
        }
        
        .table-number {
            font-weight: 600;
            font-size: 14px;
        }
        
        .table-status {
            font-size: 10px;
            margin-top: 2px;
        }
        
        .counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .counter:hover {
            transform: translateX(-50%) translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .staff {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #e74c3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.5s ease;
            cursor: pointer;
            z-index: 10;
        }
        
        .staff.moving {
            transition: all 1s ease;
        }
        
        .kitchen {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
        }
        
        .ingredients {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .ingredient {
            background: rgba(255, 255, 255, 0.8);
            padding: 8px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            border: 2px solid transparent;
        }
        
        .ingredient:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        .ingredient.selected {
            border-color: #5a67d8;
            background: rgba(90, 103, 216, 0.2);
        }
        
        .current-dish {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .dish-display {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            font-family: inherit;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .btn-cook {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            color: #333;
        }
        
        .btn-clear {
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .order-queue {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .order-item {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }
        
        .order-item.ready {
            background: linear-gradient(135deg, #d4fc79, #96e6a1);
        }
        
        .ready-dishes {
            max-height: 150px;
            overflow-y: auto;
        }
        
        .ready-dish {
            background: linear-gradient(135deg, #d4fc79, #96e6a1);
            padding: 8px 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .ready-dish:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        .ready-dish.selected {
            border: 2px solid #27ae60;
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
        }
        
        .customer-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        
        .payment-queue {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .payment-item {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .feedback {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            padding: 12px 20px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            transition: transform 0.3s ease;
            z-index: 1000;
            font-size: 14px;
        }
        
        .feedback.show {
            transform: translateX(-50%) translateY(0);
        }
        
        .feedback.success {
            background: linear-gradient(135deg, #00b894, #00cec9);
        }
        
        .feedback.error {
            background: linear-gradient(135deg, #e17055, #fdcb6e);
        }
        
        .feedback.warning {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
        }
        
        @media (max-width: 1024px) {
            .restaurant-layout {
                grid-template-columns: 1fr;
            }
            
            .tables-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .stats {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .ingredients {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .game-container {
                padding: 10px;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .tables-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .table {
                width: 60px;
                height: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="player-name">üç≥ ‡∏Å‡∏§‡∏©‡∏ì‡∏≤ ‡∏î‡∏≠‡∏°‡πÑ‡∏ò‡∏™‡∏á</div>
            <div class="stats">
                <div class="stat">
                    <div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                    <div id="score">0</div>
                </div>
                <div class="stat">
                    <div>‡πÄ‡∏á‡∏¥‡∏ô</div>
                    <div id="money">500‡∏ø</div>
                </div>
                <div class="stat">
                    <div>‡πÄ‡∏•‡πÄ‡∏ß‡∏•</div>
                    <div id="level">1</div>
                </div>
                <div class="stat">
                    <div>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏û‡∏≠‡πÉ‡∏à</div>
                    <div id="happiness">100%</div>
                </div>
            </div>
        </div>

        <div class="restaurant-layout">
            <div class="left-panel">
                <div class="panel">
                    <h3>üç≥ ‡∏Ñ‡∏£‡∏±‡∏ß</h3>
                    <div class="kitchen">
                        <div class="ingredients">
                            <div class="ingredient" data-ingredient="‡∏Ç‡πâ‡∏≤‡∏ß">üçö ‡∏Ç‡πâ‡∏≤‡∏ß</div>
                            <div class="ingredient" data-ingredient="‡πÑ‡∏Å‡πà">üçó ‡πÑ‡∏Å‡πà</div>
                            <div class="ingredient" data-ingredient="‡∏´‡∏°‡∏π">ü•ì ‡∏´‡∏°‡∏π</div>
                            <div class="ingredient" data-ingredient="‡πÄ‡∏ô‡∏∑‡πâ‡∏≠">ü•© ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠</div>
                            <div class="ingredient" data-ingredient="‡πÑ‡∏Ç‡πà">ü•ö ‡πÑ‡∏Ç‡πà</div>
                            <div class="ingredient" data-ingredient="‡∏ú‡∏±‡∏Å">ü•¨ ‡∏ú‡∏±‡∏Å</div>
                            <div class="ingredient" data-ingredient="‡πÄ‡∏™‡πâ‡∏ô">üçú ‡πÄ‡∏™‡πâ‡∏ô</div>
                            <div class="ingredient" data-ingredient="‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ">üç≤ ‡∏ã‡∏∏‡∏õ</div>
                        </div>
                        
                        <div class="current-dish">
                            <div class="dish-display" id="currentDish">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£</div>
                            <div class="action-buttons">
                                <button class="btn btn-cook" id="cookBtn" disabled>‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£ üî•</button>
                                <button class="btn btn-clear" id="clearBtn">‡∏•‡πâ‡∏≤‡∏á üßΩ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <h3>üìã ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏ó‡∏≥</h3>
                    <div class="order-queue" id="orderQueue"></div>
                </div>

                <div class="panel">
                    <h3>‚úÖ ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü</h3>
                    <div class="ready-dishes" id="readyDishes"></div>
                </div>
            </div>

            <div class="restaurant-floor">
                <h3 style="text-align: center; color: #5a67d8; margin-bottom: 20px;">üè™ ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                
                <div class="tables-grid">
                    <div class="table" data-table="1">
                        <div class="table-number">‡πÇ‡∏ï‡πä‡∏∞ 1</div>
                        <div class="table-status">‡∏ß‡πà‡∏≤‡∏á</div>
                    </div>
                    <div class="table" data-table="2">
                        <div class="table-number">‡πÇ‡∏ï‡πä‡∏∞ 2</div>
                        <div class="table-status">‡∏ß‡πà‡∏≤‡∏á</div>
                    </div>
                    <div class="table" data-table="3">
                        <div class="table-number">‡πÇ‡∏ï‡πä‡∏∞ 3</div>
                        <div class="table-status">‡∏ß‡πà‡∏≤‡∏á</div>
                    </div>
                    <div class="table" data-table="4">
                        <div class="table-number">‡πÇ‡∏ï‡πä‡∏∞ 4</div>
                        <div class="table-status">‡∏ß‡πà‡∏≤‡∏á</div>
                    </div>
                    <div class="table" data-table="5">
                        <div class="table-number">‡πÇ‡∏ï‡πä‡∏∞ 5</div>
                        <div class="table-status">‡∏ß‡πà‡∏≤‡∏á</div>
                    </div>
                    <div class="table" data-table="6">
                        <div class="table-number">‡πÇ‡∏ï‡πä‡∏∞ 6</div>
                        <div class="table-status">‡∏ß‡πà‡∏≤‡∏á</div>
                    </div>
                </div>

                <div class="staff" id="waiter" style="left: 50%; top: 300px;">
                    üë®‚Äçüç≥
                </div>

                <div class="counter" id="counter">
                    üí∞ ‡πÄ‡∏Ñ‡∏≤‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô
                    <div style="font-size: 12px; margin-top: 5px;">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h3>üí≥ ‡∏£‡∏≠‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô</h3>
            <div class="payment-queue" id="paymentQueue"></div>
        </div>
    </div>

    <div class="feedback" id="feedback"></div>

    <script>
        class RestaurantGame {
            constructor() {
                this.score = 0;
                this.money = 500;
                this.level = 1;
                this.happiness = 100;
                
                this.tables = {};
                this.orders = [];
                this.readyDishes = [];
                this.paymentQueue = [];
                this.currentDish = [];
                this.selectedDish = null;
                
                this.recipes = {
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î': ['‡∏Ç‡πâ‡∏≤‡∏ß', '‡πÑ‡∏Ç‡πà', '‡∏ú‡∏±‡∏Å'],
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡πÑ‡∏Å‡πà': ['‡∏Ç‡πâ‡∏≤‡∏ß', '‡πÑ‡∏Å‡πà', '‡πÑ‡∏Ç‡πà'],
                    '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÑ‡∏Å‡πà': ['‡πÄ‡∏™‡πâ‡∏ô', '‡πÑ‡∏Å‡πà', '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ'],
                    '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏´‡∏°‡∏π': ['‡πÄ‡∏™‡πâ‡∏ô', '‡∏´‡∏°‡∏π', '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ'],
                    '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏ô‡∏∑‡πâ‡∏≠': ['‡πÄ‡∏™‡πâ‡∏ô', '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠', '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ'],
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö': ['‡∏Ç‡πâ‡∏≤‡∏ß', '‡∏´‡∏°‡∏π', '‡πÑ‡∏Ç‡πà'],
                    '‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢': ['‡πÄ‡∏™‡πâ‡∏ô', '‡πÑ‡∏Ç‡πà', '‡∏ú‡∏±‡∏Å'],
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤': ['‡∏Ç‡πâ‡∏≤‡∏ß', '‡∏´‡∏°‡∏π', '‡πÑ‡∏Ç‡πà']
                };
                
                this.customerNames = ['‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢', '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á', '‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏¥‡∏ô‡∏ô‡∏µ‡πà', '‡∏•‡∏∏‡∏á‡∏ö‡∏∏‡∏ç‡∏°‡∏µ', '‡∏õ‡πâ‡∏≤‡πÅ‡∏™‡∏á', '‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π', '‡∏û‡∏µ‡πà‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á', '‡∏ô‡πâ‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'];
                this.menuPrices = {
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î': 40,
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡πÑ‡∏Å‡πà': 50,
                    '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÑ‡∏Å‡πà': 45,
                    '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡∏´‡∏°‡∏π': 45,
                    '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏ô‡∏∑‡πâ‡∏≠': 55,
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö': 50,
                    '‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢': 40,
                    '‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤': 45
                };
                
                this.waiterPosition = { x: 50, y: 300 };
                
                for (let i = 1; i <= 6; i++) {
                    this.tables[i] = {
                        occupied: false,
                        customer: null,
                        order: null,
                        served: false,
                        timeLeft: 0
                    };
                }
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.gameLoop();
                this.generateCustomer();
            }

            bindEvents() {
                // Kitchen events
                document.querySelectorAll('.ingredient').forEach(ing => {
                    ing.addEventListener('click', () => this.selectIngredient(ing.dataset.ingredient));
                });
                
                document.getElementById('cookBtn').addEventListener('click', () => this.cookDish());
                document.getElementById('clearBtn').addEventListener('click', () => this.clearDish());
                
                // Table events
                document.querySelectorAll('.table').forEach(table => {
                    table.addEventListener('click', () => this.handleTableClick(parseInt(table.dataset.table)));
                });
                
                // Counter event
                document.getElementById('counter').addEventListener('click', () => this.processPayments());
                
                // Ready dishes events
                document.getElementById('readyDishes').addEventListener('click', (e) => {
                    if (e.target.closest('.ready-dish')) {
                        const dishIndex = parseInt(e.target.closest('.ready-dish').dataset.index);
                        this.selectReadyDish(dishIndex);
                    }
                });
            }

            selectIngredient(ingredient) {
                if (this.currentDish.length < 3) {
                    this.currentDish.push(ingredient);
                    this.updateDishDisplay();
                }
            }

            updateDishDisplay() {
                const dishElement = document.getElementById('currentDish');
                const cookBtn = document.getElementById('cookBtn');
                
                if (this.currentDish.length === 0) {
                    dishElement.textContent = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£';
                    cookBtn.disabled = true;
                } else {
                    dishElement.textContent = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°: ${this.currentDish.join(' + ')}`;
                    cookBtn.disabled = this.currentDish.length === 0;
                }
            }

            clearDish() {
                this.currentDish = [];
                this.updateDishDisplay();
                document.querySelectorAll('.ingredient').forEach(ing => {
                    ing.classList.remove('selected');
                });
            }

            cookDish() {
                if (this.currentDish.length === 0) return;
                
                const dishName = this.identifyDish();
                if (dishName === '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏Å ‡πÜ') {
                    this.showFeedback('‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!', 'error');
                    return;
                }
                
                // Check if there's a matching order
                const matchingOrder = this.orders.find(order => order.dish === dishName);
                if (!matchingOrder) {
                    this.showFeedback('‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ô‡∏µ‡πâ!', 'warning');
                    return;
                }
                
                // Add to ready dishes
                this.readyDishes.push({
                    dish: dishName,
                    table: matchingOrder.table,
                    customer: matchingOrder.customer,
                    price: this.menuPrices[dishName] || 50
                });
                
                // Remove from orders
                this.orders = this.orders.filter(order => order !== matchingOrder);
                
                this.showFeedback(`‡∏ó‡∏≥ ${dishName} ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!`, 'success');
                this.clearDish();
                this.updateUI();
            }

            identifyDish() {
                const sortedDish = [...this.currentDish].sort();
                
                for (const [recipeName, ingredients] of Object.entries(this.recipes)) {
                    const sortedRecipe = [...ingredients].sort();
                    if (JSON.stringify(sortedDish) === JSON.stringify(sortedRecipe)) {
                        return recipeName;
                    }
                }
                
                return '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏Å ‡πÜ';
            }

            selectReadyDish(dishIndex) {
                // Clear previous selection
                document.querySelectorAll('.ready-dish').forEach(dish => {
                    dish.classList.remove('selected');
                });
                
                // Select new dish
                if (this.selectedDish === dishIndex) {
                    this.selectedDish = null;
                } else {
                    this.selectedDish = dishIndex;
                    document.querySelector(`[data-index="${dishIndex}"]`).classList.add('selected');
                }
            }

            handleTableClick(tableNum) {
                const table = this.tables[tableNum];
                
                if (this.selectedDish !== null && table.occupied && !table.served) {
                    // Serve dish to table
                    const dish = this.readyDishes[this.selectedDish];
                    if (dish.table === tableNum) {
                        this.serveDishToTable(tableNum, this.selectedDish);
                    } else {
                        this.showFeedback('‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞‡∏ô‡∏µ‡πâ!', 'error');
                    }
                }
            }

            serveDishToTable(tableNum, dishIndex) {
                const table = this.tables[tableNum];
                const dish = this.readyDishes[dishIndex];
                
                // Move waiter to table
                this.moveWaiter(tableNum, () => {
                    table.served = true;
                    table.timeLeft = 30; // Time to finish eating
                    
                    // Add to payment queue
                    this.paymentQueue.push({
                        table: tableNum,
                        customer: dish.customer,
                        dish: dish.dish,
                        price: dish.price
                    });
                    
                    // Remove from ready dishes
                    this.readyDishes.splice(dishIndex, 1);
                    this.selectedDish = null;
                    
                    this.showFeedback(`‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü ${dish.dish} ‡πÉ‡∏´‡πâ‡πÇ‡∏ï‡πä‡∏∞ ${tableNum} ‡πÅ‡∏•‡πâ‡∏ß!`, 'success');
                    this.updateUI();
                });
            }

            moveWaiter(tableNum, callback) {
                const waiter = document.getElementById('waiter');
                const tablePositions = {
                    1: { x: 20, y: 100 },
                    2: { x: 50, y: 100 },
                    3: { x: 80, y: 100 },
                    4: { x: 20, y: 200 },
                    5: { x: 50, y: 200 },
                    6: { x: 80, y: 200 }
                };
                
                const pos = tablePositions[tableNum];
                waiter.classList.add('moving');
                waiter.style.left = pos.x + '%';
                waiter.style.top = pos.y + 'px';
                
                setTimeout(() => {
                    waiter.classList.remove('moving');
                    if (callback) callback();
                }, 1000);
            }

            processPayments() {
                if (this.paymentQueue.length === 0) {
                    this.showFeedback('‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏£‡∏≠‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô', 'warning');
                    return;
                }
                
                // Process all payments
                let totalEarned = 0;
                const processedTables = [];
                
                this.paymentQueue.forEach(payment => {
                    totalEarned += payment.price;
                    processedTables.push(payment.table);
                    
                    // Clear table
                    this.tables[payment.table] = {
                        occupied: false,
                        customer: null,
                        order: null,
                        served: false,
                        timeLeft: 0
                    };
                });
                
                this.money += totalEarned;
                this.score += totalEarned;
                this.paymentQueue = [];
                
                this.showFeedback(`‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ${totalEarned}‡∏ø ‡πÅ‡∏•‡πâ‡∏ß!`, 'success');
                this.updateUI();
                this.checkLevelUp();
            }

            generateCustomer() {
                const emptyTables = Object.keys(this.tables).filter(tableNum => 
                    !this.tables[tableNum].occupied
                );
                
                if (emptyTables.length === 0) return;
                
                const randomTable = emptyTables[Math.floor(Math.random() * emptyTables.length)];
                const recipes = Object.keys(this.recipes);
                const randomRecipe = recipes[Math.floor(Math.random() * recipes.length)];
                const randomName = this.customerNames[Math.floor(Math.random() * this.customerNames.length)];
                
                this.tables[randomTable] = {
                    occupied: true,
                    customer: randomName,
                    order: randomRecipe,
                    served: false,
                    timeLeft: 60 + (Math.random() * 40)
                };
                
                this.orders.push({
                    table: parseInt(randomTable),
                    customer: randomName,
                    dish: randomRecipe,
                    timeLeft: this.tables[randomTable].timeLeft
                });
                
                this.updateUI();
            }

            updateUI() {
                // Update stats
                document.getElementById('score').textContent = this.score;
                document.getElementById('money').textContent = this.money + '‡∏ø';
                document.getElementById('level').textContent = this.level;
                document.getElementById('happiness').textContent = Math.max(0, this.happiness) + '%';
                
                // Update tables
                Object.keys(this.tables).forEach(tableNum => {
                    const table = this.tables[tableNum];
                    const tableElement = document.querySelector(`[data-table="${tableNum}"]`);
                    const statusElement = tableElement.querySelector('.table-status');
                    
                    tableElement.className = 'table';
                    
                    if (!table.occupied) {
                        statusElement.textContent = '‡∏ß‡πà‡∏≤‡∏á';
                    } else if (table.served) {
                        statusElement.textContent = '‡∏Å‡∏¥‡∏ô';
                        tableElement.classList.add('paid');
                    } else {
                        statusElement.textContent = table.order;
                        tableElement.classList.add('occupied');
                    }
                });
                
                // Update order queue
                this.updateOrderQueue();
                
                // Update ready dishes
                this.updateReadyDishes();
                
                // Update payment queue
                this.updatePaymentQueue();
            }

            updateOrderQueue() {
                const container = document.getElementById('orderQueue');
                container.innerHTML = '';
                
                this.orders.forEach((order, index) => {
                    const orderElement = document.createElement('div');
                    orderElement.className = 'order-item';
                    orderElement.innerHTML = `
                        <div>
                            <div style="font-weight: 600;">‡πÇ‡∏ï‡πä‡∏∞ ${order.table} - ${order.customer}</div>
                            <div style="color: #e74c3c;">${order.dish}</div>
                        </div>
                        <div style="text-align: right; font-size: 12px;">
                            ‚è∞ ${Math.ceil(order.timeLeft)}s
                        </div>
                    `;
                    container.appendChild(orderElement);
                });
            }

            updateReadyDishes() {
                const container = document.getElementById('readyDishes');
                container.innerHTML = '';
                
                this.readyDishes.forEach((dish, index) => {
                    const dishElement = document.createElement('div');
                    dishElement.className = 'ready-dish';
                    dishElement.dataset.index = index;
                    dishElement.innerHTML = `
                        <div>
                            <div style="font-weight: 600;">${dish.dish}</div>
                            <div style="font-size: 12px;">‡πÇ‡∏ï‡πä‡∏∞ ${dish.table} - ${dish.customer}</div>
                        </div>
                        <div style="color: #27ae60; font-weight: 600;">
                            ${dish.price}‡∏ø
                        </div>
                    `;
                    container.appendChild(dishElement);
                });
            }

            updatePaymentQueue() {
                const container = document.getElementById('paymentQueue');
                container.innerHTML = '';
                
                this.paymentQueue.forEach((payment, index) => {
                    const paymentElement = document.createElement('div');
                    paymentElement.className = 'payment-item';
                    paymentElement.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">‡πÇ‡∏ï‡πä‡∏∞ ${payment.table} - ${payment.customer}</div>
                                <div style="font-size: 14px;">${payment.dish}</div>
                            </div>
                            <div style="color: #e67e22; font-weight: 600; font-size: 16px;">
                                ${payment.price}‡∏ø
                            </div>
                        </div>
                    `;
                    container.appendChild(paymentElement);
                });
            }

            showFeedback(message, type) {
                const feedback = document.getElementById('feedback');
                feedback.textContent = message;
                feedback.className = `feedback ${type} show`;
                
                setTimeout(() => {
                    feedback.classList.remove('show');
                }, 2500);
            }

            checkLevelUp() {
                const newLevel = Math.floor(this.score / 200) + 1;
                if (newLevel > this.level) {
                    this.level = newLevel;
                    this.showFeedback(`üéâ ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏• ${this.level}!`, 'success');
                }
            }

            gameLoop() {
                setInterval(() => {
                    // Update customer timers
                    Object.keys(this.tables).forEach(tableNum => {
                        const table = this.tables[tableNum];
                        if (table.occupied && table.timeLeft > 0) {
                            table.timeLeft -= 1;
                            
                            if (table.timeLeft <= 0) {
                                if (table.served) {
                                    // Customer finished eating, move to payment
                                    // Already in payment queue
                                } else {
                                    // Customer left without being served
                                    this.tables[tableNum] = {
                                        occupied: false,
                                        customer: null,
                                        order: null,
                                        served: false,
                                        timeLeft: 0
                                    };
                                    
                                    // Remove from orders
                                    this.orders = this.orders.filter(order => order.table !== parseInt(tableNum));
                                    
                                    this.happiness -= 10;
                                    this.showFeedback(`‡πÇ‡∏ï‡πä‡∏∞ ${tableNum} ‡πÇ‡∏Å‡∏£‡∏ò‡πÅ‡∏•‡πâ‡∏ß! üò†`, 'error');
                                }
                            }
                        }
                    });
                    
                    // Update order timers
                    this.orders.forEach(order => {
                        if (order.timeLeft > 0) {
                            order.timeLeft -= 1;
                        }
                    });
                    
                    // Generate new customers
                    if (Math.random() < 0.15) { // 15% chance per second
                        this.generateCustomer();
                    }
                    
                    this.updateUI();
                    
                    // Game over check
                    if (this.happiness <= 0) {
                        this.showFeedback('‡πÄ‡∏Å‡∏°‡∏à‡∏ö! ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ!', 'error');
                    }
                }, 1000);
            }
        }

        // Start the game
        window.addEventListener('DOMContentLoaded', () => {
            new RestaurantGame();
        });
